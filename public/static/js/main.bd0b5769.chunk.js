(this["webpackJsonparound-react"]=this["webpackJsonparound-react"]||[]).push([[0],{11:function(e,t,a){e.exports=a(17)},16:function(e,t,a){},17:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(6),c=a.n(o),s=(a(16),a(10)),i=a(3),l=a(1),u=a(7),m=a.n(u);function d(){return r.a.createElement("header",{className:"header"},r.a.createElement("img",{src:m.a,alt:"Logo",className:"header__logo"}))}var f=r.a.createContext();function _(e){var t=e.card,a=e.id,n=e.onCardClick,o=e.onCardLike,c=e.onCardDelete,s=r.a.useContext(f),i=t.owner._id===s._id,l="post__remove ".concat(i?"":"post__remove_disabled"),u=t.likes.some((function(e){return e._id===s._id})),m="button post__like ".concat(u?"post__like_liked":"");return r.a.createElement("li",{className:"post",id:a},r.a.createElement("div",{className:"post__image",onClick:function(e){n(t)},style:{backgroundImage:"url(".concat(t.link,")")}},r.a.createElement("button",{className:l,onClick:c})),r.a.createElement("div",{className:"post__info"},r.a.createElement("p",{className:"post__caption"},t.name),r.a.createElement("div",{className:"post__likes"},r.a.createElement("button",{className:m,onClick:function(e){o(t)}}),r.a.createElement("p",{className:"post__like-count"},t.likes.length))))}var h=function(e){var t=e.onEditProfile,a=e.onAddPlace,n=e.onEditAvatar,o=e.onCardClick,c=e.cards,s=e.onCardLike,i=e.onCardDelete,l=r.a.useContext(f);return r.a.createElement("main",{className:"content"},r.a.createElement("section",{className:"profile"},r.a.createElement("div",{className:"profile__main"},r.a.createElement("div",{onClick:n,className:"profile__userpic"},r.a.createElement("img",{alt:"Userpic",className:"profile__pic",src:l.avatar})),r.a.createElement("div",{className:"profile__text"},r.a.createElement("div",{className:"profile__name"},r.a.createElement("h1",{className:"profile__username"},l.name),r.a.createElement("button",{className:"button profile__edit-btn",onClick:t})),r.a.createElement("p",{className:"profile__bio"},l.about))),r.a.createElement("button",{className:"button profile__add-btn",onClick:a})),r.a.createElement("section",{className:"photo-grid"},r.a.createElement("ul",{className:"photo-grid__posts"},c.map((function(e,t){return r.a.createElement(_,{key:t,id:t,card:e,onCardLike:s,onCardDelete:i,onCardClick:function(e){o(e)}})})))))};function p(){return r.a.createElement("footer",{className:"footer"},r.a.createElement("p",{className:"footer__copyright"},"\xa9 2020 Dasha Borisenko-Orlowski"))}function v(e){var t=e.isOpen,a=e.name,n=e.onClose,o=e.title,c=e.children,s=e.button,i=e.onSubmit;r.a.useEffect((function(){document.querySelector(".modal_goal_".concat(a)).reset()}),[t]);var l=t?"modal__container_active":"";return r.a.createElement("div",{className:"modal__container ".concat(l," modal__container_type_").concat(a)},r.a.createElement("button",{className:"button modal__close-btn",type:"reset",onClick:n}),r.a.createElement("form",{className:"modal modal_type_form modal_goal_".concat(a),onSubmit:i},r.a.createElement("h2",{className:"modal__title"},o),r.a.createElement("fieldset",{className:"modal__fieldset"},c),r.a.createElement("button",{type:"submit",className:"button modal__save-btn"},s)))}var E=function(e){var t=e.type,a=e.id,n=e.placeholder,o=e.maxLength,c=e.minLength,s=e.onChange,i=e.defaultValue,l=e.parentRef;return r.a.createElement(r.a.Fragment,null,r.a.createElement("input",{ref:l,type:t,id:a,className:"modal__input",placeholder:n,required:!0,maxLength:o,minLength:c,defaultValue:i,onChange:s}),r.a.createElement("span",{id:"error-".concat(a),className:"modal__error"}))};function b(e){var t=e.isOpen,a=e.onClose,n=e.onUpdateUser,o=r.a.useContext(f),c=r.a.useState(""),s=Object(l.a)(c,2),i=s[0],u=s[1],m=r.a.useState(""),d=Object(l.a)(m,2),_=d[0],h=d[1];return r.a.useEffect((function(){u(o.name),h(o.about)}),[o]),r.a.createElement(v,{name:"update",title:"Edit profile",button:"Save",isOpen:t,onClose:a,onSubmit:function(e){e.preventDefault(),n(i,_,o.avatar)}},r.a.createElement(E,{type:"text",id:"username",className:"modal__input",placeholder:"Name",maxLength:"40",minLength:"2",defaultValue:i,onChange:function(e){u(e.target.value)}}),r.a.createElement(E,{type:"text",id:"about",className:"modal__input",placeholder:"Who are you?",maxLength:"200",minLength:"2",defaultValue:_,onChange:function(e){h(e.target.value)}}))}function g(e){var t=e.isOpen,a=e.onClose,n=e.onUpdateAvatar,o=r.a.useRef();return r.a.createElement(v,{name:"avatar",title:"Change profile picture",button:"Update",isOpen:t,onClose:a,onSubmit:function(e){e.preventDefault(),n(o.current.value)}},r.a.createElement(E,{parentRef:o,type:"url",placeholder:"Image URL",id:"avatar",className:"modal__input",required:!0}))}function C(e){var t=e.isOpen,a=e.onClose,n=e.onAddCard,o=r.a.useState(""),c=Object(l.a)(o,2),s=c[0],i=c[1],u=r.a.useState(""),m=Object(l.a)(u,2),d=m[0],f=m[1];return r.a.createElement(v,{name:"create",title:"New Place",button:"Create",isOpen:t,onClose:a,onSubmit:function(e){e.preventDefault(),n(s,d)}},r.a.createElement(E,{type:"text",placeholder:"Title",id:"name",className:"modal__input",required:!0,maxLength:"30",minLength:"1",onChange:function(e){i(e.target.value)}}),r.a.createElement(E,{type:"url",placeholder:"Image URL",id:"link",className:"modal__input",required:!0,onChange:function(e){f(e.target.value)}}))}function k(e){var t=e.card,a=e.isOpen,n=e.onClose;return r.a.createElement("div",{className:"modal__container ".concat(a?"modal__container_active":""," modal__container_type_view")},r.a.createElement("div",{className:"modal modal_type_view"},r.a.createElement("button",{className:"button modal__close-btn modal__close-btn_type_view",type:"reset",onClick:n}),r.a.createElement("img",{className:"modal__fullview",src:t.link,alt:t.name}),r.a.createElement("p",{className:"modal__caption"},t.name)))}var N=a(8),y=a(9),O=new(function(){function e(t){var a=t.baseUrl,n=t.headers;Object(N.a)(this,e),this._baseUrl=a,this._headers=n}return Object(y.a)(e,[{key:"getAppInfo",value:function(){return Promise.all([this.getUserInfo(),this.getCardList()])}},{key:"getCardList",value:function(){return fetch(this._baseUrl+"/cards",{headers:this._headers}).then((function(e){return e.ok?e.json():Promise.reject("Error!"+e.statusText)}))}},{key:"getUserInfo",value:function(){return fetch(this._baseUrl+"/users/me",{headers:this._headers}).then((function(e){return e.ok?e.json():Promise.reject("Error! "+e.statusText)}))}},{key:"addCard",value:function(e){var t=e.name,a=e.link;return fetch(this._baseUrl+"/cards",{headers:this._headers,method:"POST",body:JSON.stringify({name:t,link:a})}).then((function(e){return e.ok?e.json():Promise.reject("Error! "+e.statusText)}))}},{key:"removeCard",value:function(e){return fetch(this._baseUrl+"/cards/"+e,{headers:this._headers,method:"DELETE"}).then((function(e){return e.ok?e.json():Promise.reject("Error! "+e.statusText)}))}},{key:"changeLikeCardStatus",value:function(e,t){return fetch(this._baseUrl+"/cards/likes/"+e,{headers:this._headers,method:t?"PUT":"DELETE"}).then((function(e){return e.ok?e.json():Promise.reject("Error! "+e.statusText)}))}},{key:"setUserInfo",value:function(e){var t=e.name,a=e.about;return fetch(this._baseUrl+"/users/me",{headers:this._headers,method:"PATCH",body:JSON.stringify({name:t,about:a})}).then((function(e){return e.ok?e.json():Promise.reject("Error! "+e.statusText)}))}},{key:"setUserAvatar",value:function(e){var t=e.avatar;return fetch(this._baseUrl+"/users/me/avatar",{headers:this._headers,method:"PATCH",body:JSON.stringify({avatar:t})}).then((function(e){return e.ok?e.json():Promise.reject("Error! "+e.statusText)}))}}]),e}())({baseUrl:"https://around.nomoreparties.co/v1/group-3",headers:{authorization:"72f35e11-165d-430a-b739-20a2fba93ad3","Content-Type":"application/json"}});function j(){var e=r.a.useState(!1),t=Object(l.a)(e,2),a=t[0],n=t[1],o=r.a.useState(!1),c=Object(l.a)(o,2),u=c[0],m=c[1],_=r.a.useState(!1),E=Object(l.a)(_,2),N=E[0],y=E[1],j=r.a.useState(!1),U=Object(l.a)(j,2),S=U[0],L=U[1],x=r.a.useState(!1),P=Object(l.a)(x,2),w=P[0],T=P[1],A=r.a.useState({}),D=Object(l.a)(A,2),I=D[0],q=D[1],J=r.a.useState([]),R=Object(l.a)(J,2),V=R[0],B=R[1],W=r.a.useState({name:"",about:"",avatar:""}),H=Object(l.a)(W,2),z=H[0],F=H[1];r.a.useEffect((function(){O.getUserInfo().then((function(e){F(e)})).catch((function(e){return console.log(e)}))}),[]),r.a.useEffect((function(){O.getCardList().then((function(e){B(e)})).catch((function(e){return console.log(e)}))}),[]);return r.a.createElement(f.Provider,{value:z},r.a.createElement("div",{className:"page"},r.a.createElement(d,null),r.a.createElement(h,{onEditProfile:function(){n(!0)},onAddPlace:function(){m(!0)},onEditAvatar:function(){y(!0)},onCardClick:function(e){q(e),T(!0)},cards:V,onCardLike:function(e){var t=e.likes.some((function(e){return e._id===z._id}));O.changeLikeCardStatus(e._id,!t).then((function(t){var a=V.map((function(a){return a._id===e._id?t:a}));B(a)})).catch((function(e){return console.log(e)}))},onCardDelete:function(e){q(V[e.target.parentElement.parentElement.id]),e.stopPropagation(),L(!0)}}),r.a.createElement(p,null),r.a.createElement(b,{isOpen:a,onClose:function(){n(!1)},onUpdateUser:function(e,t){O.setUserInfo({name:e,about:t}).then((function(e){F(Object(i.a)(Object(i.a)({},z),{},{name:e.name,about:e.about})),n(!1)})).catch((function(e){return console.log(e)}))}}),r.a.createElement(g,{isOpen:N,onClose:function(){y(!1)},onUpdateAvatar:function(e){O.setUserAvatar({avatar:e}).then((function(e){F(Object(i.a)(Object(i.a)({},z),{},{avatar:e.avatar})),y(!1)})).catch((function(e){return console.log(e)}))}}),r.a.createElement(C,{isOpen:u,onClose:function(){m(!1)},onAddCard:function(e,t){var a={name:e,link:t};O.addCard(a).then((function(e){B([e].concat(Object(s.a)(V))),m(!1)})).catch((function(e){return console.log(e)}))}}),r.a.createElement(v,{name:"delete",title:"Are you sure?",button:"Yes",isOpen:S,onClose:function(){L(!1)},onSubmit:function(e){e.preventDefault(),O.removeCard(I._id).then((function(){var e=V.filter((function(e){return e._id!==I._id}));B(e),L(!1)})).catch((function(e){return console.log(e)}))}}),r.a.createElement(k,{card:I,isOpen:w,onClose:function(){T(!1)}})))}Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(j,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},7:function(e,t,a){e.exports=a.p+"static/media/logo.8f7611ae.svg"}},[[11,1,2]]]);
//# sourceMappingURL=main.bd0b5769.chunk.js.map